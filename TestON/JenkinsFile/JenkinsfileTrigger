#!groovy

def triggerJob( on ){
    jobToRun = on + "-pipeline-trigger"
    build job: jobToRun, propagate: false
}

machines = params.machines
machineList = machines.tokenize( "\n;, " )
machineOn = [:]

for machine in machineList{
    machineOn[ machine ] = triggerJob( machine )
}

parallel machineOn